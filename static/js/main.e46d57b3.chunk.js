(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{15:function(e,t,a){},34:function(e,t,a){e.exports=a.p+"static/media/wallet.2fdf2d8e.png"},36:function(e,t,a){e.exports=a(56)},45:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),c=a.n(l),o=a(22),i=a(9),s=a(13),u=a(32),m=a(33),d=a(2),p={email:"",password:"",name:""};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return Object(d.a)(Object(d.a)({},e),{},{email:t.payload.email,password:t.payload.password,name:t.payload.name});default:return e}},E=a(35),b={isFetching:!0,currencies:[],expenses:[]};var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_CURRENCIES":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!0});case"GET_CURRENCIES":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,currencies:t.payload});case"ADD_EXPENSE":return Object(d.a)(Object(d.a)({},e),{},{expenses:[].concat(Object(E.a)(e.expenses),[t.payload])});case"DELETE_EXPENSE":return Object(d.a)(Object(d.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.payload}))});default:return e}},v=Object(s.combineReducers)({user:h,wallet:f}),g=Object(s.createStore)(v,Object(u.composeWithDevTools)(Object(s.applyMiddleware)(m.a))),y=(a(15),a(3)),j=a(17),O=a(7),w=a(8),C=a(14),x=a(11),N=a(10),S=a(34),k=a.n(S),D=(a(45),a(18),a(20)),R=a.n(D),F=a(25),T=function(e){return{type:"ADD_EXPENSE",payload:e}},V={email:"",senha:"",nome:"",error:{email:"",password:""},buttonDisabled:!0},U=function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(){var e;return Object(O.a)(this,a),(e=t.call(this)).state=V,e.onChange=e.onChange.bind(Object(C.a)(e)),e}return Object(w.a)(a,[{key:"onChange",value:function(e){var t=this,a=this.state.buttonDisabled,n=e.target,r=n.id,l=n.value;this.setState(Object(j.a)({},r,l)),this.setState({buttonDisabled:!0},(function(){t.emailValidation()&&t.passwordValidation()&&t.setState({buttonDisabled:!1})})),a||this.setState({error:{email:"",password:""}})}},{key:"onSubmit",value:function(){var e=this.state,t=e.email,a=e.senha,n=e.nome,r=this.props.history,l={email:t,senha:a,nome:n},c=this.props.dispatchLogin;this.emailValidation()&&this.passwordValidation()&&(c(l),r.push("/carteira"))}},{key:"emailValidation",value:function(){var e=this.state,t=e.email,a=e.error;return!(!t||!1===/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(t))&&(this.setState({error:Object(d.a)(Object(d.a)({},a),{},{email:""})}),!0)}},{key:"passwordValidation",value:function(){var e=this.state,t=e.senha,a=e.error;return!t||t.length<6?(this.setState({error:Object(d.a)(Object(d.a)({},a),{},{password:"M\xednimo de 6 caracteres"})}),!1):(this.setState({error:Object(d.a)(Object(d.a)({},a),{},{password:""})}),!0)}},{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.senha,l=t.nome,c=t.error,o=t.buttonDisabled;return r.a.createElement("div",{className:"form form-group"},r.a.createElement("img",{src:k.a,alt:"trybewallet",className:"logo"}),r.a.createElement("h4",null,"Bem vindo a TrybeWallet."),r.a.createElement("h6",null,"Fa\xe7a o cadastro e entre"),r.a.createElement("div",{className:"form-group mb-3"},r.a.createElement("div",{className:"inputForm"},r.a.createElement("strong",null,"Nome"),r.a.createElement("input",{id:"nome",type:"text",name:"nome",value:l,onChange:this.onChange,className:"form-control"})),r.a.createElement("div",{className:"inputForm"},r.a.createElement("strong",null,"Email"),r.a.createElement("input",{"data-testid":"email-input",id:"email",type:"email",name:"email",value:a,onChange:this.onChange,className:"form-control"}),r.a.createElement("span",{className:"text-danger"},c.email)),r.a.createElement("div",{className:"inputForm"},r.a.createElement("strong",null,"Senha"),r.a.createElement("input",{"data-testid":"password-input",id:"senha",type:"password",name:"senha",value:n,onChange:this.onChange,className:"form-control"}),r.a.createElement("span",{className:"text-danger"},c.password))),r.a.createElement("div",{className:"d-grid"},r.a.createElement("button",{type:"submit",className:"btn btn-dark",onClick:function(){return e.onSubmit()},disabled:o},"Entrar")))}}]),a}(r.a.Component),_=Object(i.b)(null,(function(e){return{dispatchLogin:function(t){return e(function(e){return{type:"LOGIN_USER",payload:{email:e.email,password:e.senha,name:e.nome}}}(t))}}}))(U),A=(a(47),function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(O.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).convertValue=function(e){var t=e.value,a=e.currency,n=e.exchangeRates[a].ask;return Number(t*n)},e.expenseTotal=function(){return e.props.wallet.expenses.reduce((function(t,a){return t+e.convertValue(a)}),0).toFixed(2)},e}return Object(w.a)(a,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement("header",null,r.a.createElement("h1",null,"Carteira"),r.a.createElement("div",{className:"container-direita"},r.a.createElement("div",{className:"usuario"},r.a.createElement("p",{"data-testid":"email-field"},e.email),r.a.createElement("p",{"data-testid":"name-field"},e.name)),r.a.createElement("div",{className:"despesas"},r.a.createElement("span",null,"Despesa Total: R$"),r.a.createElement("span",{"data-testid":"total-field"},"".concat(this.expenseTotal())),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL"))))}}]),a}(r.a.Component)),L=Object(i.b)((function(e){return{user:e.user,wallet:e.wallet}}),null)(A),M=(a(48),{value:0,currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o",description:""}),I=function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).state=M,n.onChange=n.onChange.bind(Object(C.a)(n)),n.onSubmit=n.onSubmit.bind(Object(C.a)(n)),n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatchCurrencies)()}},{key:"onChange",value:function(e){var t=e.target,a=t.id,n=t.value;this.setState(Object(j.a)({},a,n))}},{key:"onSubmit",value:function(){var e=this.props,t=e.dispatchExpense,a=e.wallet,n=this.state;t({value:n.value,currency:n.currency,method:n.method,tag:n.tag,description:n.description},a),this.setState(M)}},{key:"render",value:function(){var e=this.props.wallet.currencies,t=this.state,a=t.value,n=t.currency,l=t.method,c=t.tag,o=t.description;return r.a.createElement("div",{className:"form-add form-group"},r.a.createElement("label",{htmlFor:"value"},"Valor",r.a.createElement("input",{className:"form-control","data-testid":"value-input",type:"number",id:"value",value:a,onChange:this.onChange})),r.a.createElement("label",{htmlFor:"currency"},"moeda",r.a.createElement("select",{className:"form-control",id:"currency",name:"currency",value:n,onChange:this.onChange},e.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("label",{htmlFor:"method"},"Metodo",r.a.createElement("select",{className:"form-control","data-testid":"method-input",id:"method",name:"method",value:l,onChange:this.onChange},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag"},"Categoria",r.a.createElement("select",{className:"form-control","data-testid":"tag-input",id:"tag",name:"tag",value:c,onChange:this.onChange},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"))),r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o",r.a.createElement("input",{className:"form-control","data-testid":"description-input",type:"text",id:"description",value:o,onChange:this.onChange})),r.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:this.onSubmit},"Adicionar Despesa"))}}]),a}(r.a.Component),P=Object(i.b)((function(e){return{user:e.user,wallet:e.wallet}}),(function(e){return{dispatchCurrencies:function(){return e(function(){var e=Object(F.a)(R.a.mark((function e(t){var a,n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUEST_CURRENCIES"}),e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,r=Object.keys(n).filter((function(e){return"USDT"!==e})),t({type:"GET_CURRENCIES",payload:r});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},dispatchExpense:function(t,a){return e(function(e,t){return function(){var a=Object(F.a)(R.a.mark((function a(n){var r,l,c,o;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return r=a.sent,a.next=5,r.json();case 5:l=a.sent,c=t.expenses.length,o=Object(d.a)(Object(d.a)({id:c},e),{},{exchangeRates:l}),n(T(o));case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t,a))}}}))(I),B=(a(49),function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(w.a)(a,[{key:"render",value:function(){return r.a.createElement("footer",null,r.a.createElement("p",null,"Feito com"," ",r.a.createElement("span",{role:"img","aria-label":"Heart"},"\u2764\ufe0f")," ","por Pedro Mello."))}}]),a}(r.a.Component)),G=function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(O.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).convertValue=function(e){var t=e.value,a=e.currency,n=e.exchangeRates[a].ask;return Number(t*n).toFixed(2)},e.findExchange=function(e){var t=e.currency,a=e.exchangeRates;return Number(a[t].ask).toFixed(2)},e.findCurrencyName=function(e){var t=e.currency;return e.exchangeRates[t].name},e}return Object(w.a)(a,[{key:"render",value:function(){var e=this.props,t=e.expense,a=e.deleteExpense,n=t.description,l=t.tag,c=t.method,o=t.value;return r.a.createElement("tr",{className:""},r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,c),r.a.createElement("td",null,Number(o).toFixed(2)),r.a.createElement("td",null,this.findCurrencyName(t)),r.a.createElement("td",null,this.findExchange(t)),r.a.createElement("td",null,this.convertValue(t)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-danger","data-testid":"delete-btn",type:"button",onClick:function(){return a(t)}},"Deletar")))}}]),a}(r.a.Component),W=Object(i.b)(null,null)(G),X=(a(50),function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(O.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).deleteExpense=function(t){(0,e.props.deleteExpense)(t)},e}return Object(w.a)(a,[{key:"render",value:function(){var e=this,t=this.props.expenses;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,null),r.a.createElement(P,null),r.a.createElement("table",{className:"table table-hover"},r.a.createElement("thead",{className:""},r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,t.map((function(t,a){return r.a.createElement(W,{key:a,expense:t,deleteExpense:e.deleteExpense})})))),r.a.createElement(B,null))}}]),a}(r.a.Component)),z=Object(i.b)((function(e){return{user:e.user,wallet:e.wallet,expenses:e.wallet.expenses}}),(function(e){return{deleteExpense:function(t){return e(function(e){return{type:"DELETE_EXPENSE",payload:e.id}}(t))}}}))(X);var $=function(){return r.a.createElement(y.c,null,r.a.createElement(y.a,{exact:!0,path:"/",component:_}),r.a.createElement(y.a,{path:"/carteira",component:z}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(o.a,null,r.a.createElement(o.b,{basename:"/"},r.a.createElement(i.a,{store:g},r.a.createElement($,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.e46d57b3.chunk.js.map